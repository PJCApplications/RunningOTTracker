<!DOCTYPE html>
<html>
<head>
    <title>Running OT Tracker</title>

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">

    <link rel="stylesheet" href="CSS/jquery.mobile-1.4.2.css" />

    <script type="text/javascript" charset="utf-8" src="js/cordova.js"></script>

    <script type="text/javascript" charset="utf-8" src="js/jquery-1.9.1.min.js"></script>
    <script type="text/javascript" charset="utf-8" src="js/jquery.mobile-1.4.2.js"></script>
    <!--
    <script type="text/javascript" charset="utf-8" src="js/ot-app.js"></script>
    -->



</head>

<body>
  <div data-role="page" data-control-title="AddOT" id="AddOT">
      <div data-theme="a" data-role="header">
          <h3>
              Add OT
          </h3>
      </div>

      <div data-role="content">
<!--
          <div data-role="fieldcontain" data-controltype="selectmenu">
              <label for="selectmenu1">
                  Choose:
              </label>
              <select id="selectmenu1" name="">
                  <option value="LF">
                      Late Finish
                  </option>
                  <option value="ES">
                      Early Start
                  </option>
                  <option value="OOO">
                      Out of Area Meal Break
                  </option>
                  <option value="DMB">
                      Disturbed Meal Break
                  </option>
                  <option value="LMB">
                      Late Meal Break
                  </option>
              </select>
          </div>

          <div data-role="fieldcontain" data-controltype="dateinput">
              <label for="dateinput3">
                  Date:
              </label>
              <input name="" id="dateinput3" placeholder="" value="01/06/2014" type="date">
          </div>
          <div data-role="fieldcontain" data-controltype="dateinput">
              <label for="dateinput2">
                  Time:
              </label>
              <input name="" id="dateinput2" placeholder="" value="08:30" type="time">
          </div>

          <div data-role="fieldcontain" data-controltype="textinput">
              <label for="textinput1">
                  CAD Number:
              </label>
              <input name="" id="textinput1" placeholder="" value="" type="number">
          </div>
          <div data-role="fieldcontain" data-controltype="textinput">
              <label for="textinput2">
                  Vehicle Number:
              </label>
              <input name="" id="textinput2" placeholder="" value="" type="number">
          </div>
          <div data-role="fieldcontain" data-controltype="textarea">
              <label for="textarea1">
                  Notes:
              </label>
              <textarea name="" id="textarea1" placeholder=""></textarea>
          </div>
          <input type="submit" value="Submit">
      </div>
--!><!-->
      <h1>WebSQL</h1>

          <a href=# data-role=button id=create> Create customers table </a>
          <span> Last name </span>
          <input type=text id=lname>
          <span> First name </span>
          <input type=text id=fname>
          <a href=# data-role=button id=insert> Insert the customer </a>
          <a href=# data-role=button id=list> List customers </a>



      <br>


      <br>
      <span style="font-weight:bold;">Currently stored values:</span>
      <span id="lbUsers"></span>


      <!-- Footer/Navbar ----------------------------------------------------------------------------------------->
      <div data-role="footer" data-id="foo1" data-position="fixed">
          <div data-role="navbar" data-iconpos="top">
              <ul>
                  <li><a href="#AddOT" data-icon="plus" class="ui-btn-active ui-state-persist">Add OT</a></li>
                  <li><a href="#ViewOT" data-icon="grid">View OT</a></li>
              </ul>
          </div><!-- /navbar -->
      </div>
      <!-- End of Footer/Navbar ---------------------------------------------------------------------------------->

  </div>




  <div data-role="page" data-control-title="ViewOT" id="ViewOT">
      <div data-theme="a" data-role="header">
          <h3>
              View OT
          </h3>
      </div>
      <div data-role="content">

          <div data-controltype="textblock">
              <b>
                  Enter content here...
              </b>
          </div>
      </div>

      <!-- Footer/Navbar ----------------------------------------------------------------------------------------->
      <div data-role="footer" data-id="foo1" data-position="fixed">
          <div data-role="navbar" data-iconpos="top">
              <ul>
                  <li><a href="#AddOT" data-icon="plus">Add OT</a></li>
                  <li><a href="#ViewOT" data-icon="grid" class="ui-btn-active ui-state-persist">View OT</a></li>
              </ul>
          </div><!-- /navbar -->
      </div>
      <!-- End of Footer/Navbar ---------------------------------------------------------------------------------->

  </div>
</body>
</html>

<script>

    var db = openDatabase ("Test", "1.0", "Test", 65535);

    $("#create").bind ("click", function (event)
    {
        db.transaction (function (transaction)
        {
            var sql = "CREATE TABLE customers " +
                    " (id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, " +
                    "lname VARCHAR(100) NOT NULL, " +
                    "fname VARCHAR(100) NOT NULL)"
            transaction.executeSql (sql, undefined, function ()
            {
                alert ("Table created");
            }, error);
        });
    });

    $("#remove").bind ("click", function (event)
    {
        if (!confirm ("Delete table?", "")) return;;
        db.transaction (function (transaction)
        {
            var sql = "DROP TABLE customers";
            transaction.executeSql (sql, undefined, ok, error);
        });
    });

    $("#insert").bind ("click", function (event)
    {
        var lname = $("#lname").val ();
        var fname = $("#fname").val ();

        db.transaction (function (transaction)
        {
            var sql = "INSERT INTO customers (lname, fname) VALUES (?, ?)";
            transaction.executeSql (sql, [lname, fname], function ()
            {
                alert ("Customer inserted");
            }, error);
        });
    });

    $("#list").bind ("click", function (event)
    {
        db.transaction (function (transaction)
        {
            var sql = "SELECT * FROM customers";
            transaction.executeSql (sql, undefined,
                    function (transaction, result)
                    {
                        var html = "<ul>";
                        if (result.rows.length)
                        {
                            for (var i = 0; i < result.rows.length; i++)
                            {
                                var row = result.rows.item (i);
                                var lname = row.lname;
                                var fname = row.fname;
                                html += "<li>" + lname + "&nbsp;" + fname + "</li>";
                            }
                        }
                        else
                        {
                            html += "<li> No customer </li>";
                        }

                        html += "</ul>";

                        $("#ViewOT").unbind ().bind ("pagebeforeshow", function ()
                        {
                            var $content = $("#ViewOT div:ViewOT(role=content)");
                            $content.html (html);
                            var $ul = $content.find ("ul");
                            $ul.listview ();
                        });

                        $.mobile.changePage ($("#ViewOT"));

                    }, error);
        });
    });

    function ok ()
    {
    }

    function error (transaction, err)
    {
        alert ("DB error : " + err.message);
        return false;
    }

</script>
